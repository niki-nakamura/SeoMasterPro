## ã„ã¾æŠŠæ¡ã—ã¦ã„ã‚‹çŠ¶æ³

* **ãƒ­ãƒ¼ã‚«ãƒ« LLMï¼ˆOllamaï¼‰** ã¯æ—¢ã« PC å´ã§èµ·å‹•ã§ãã‚‹å‰æã€‚

  * ãƒãƒ¼ãƒˆ `11434` ã§å¾…æ©Ÿã—ã¦ã„ã‚‹ API ã‚’ä½¿ã„ã¾ã™ã€‚
* `scripts/embed_existing_articles.ts` ã¯ **OpenAI Embedding** ã‚’å‰æã«å®Ÿè£…æ¸ˆã¿ã€‚
* `package.json` ã«ã¯ `"embed": "tsx scripts/embed_existing_articles.ts"` ãŒç™»éŒ²æ¸ˆã¿ã€‚
* Replit ã§ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ãƒ“ãƒ«ãƒ‰å‹•ä½œã¯æ­£å¸¸ã€‚

---

## æ¬¡ã«è¡Œã†ä½œæ¥­ï¼ˆã‚ãªãŸï¼é–‹ç™ºè€…ãŒ Replit ä¸Šã§å®Ÿæ–½ï¼‰

| æ‰‹é † | ä½œæ¥­å†…å®¹               | å…·ä½“çš„ã‚³ãƒãƒ³ãƒ‰ / å¤‰æ›´ç®‡æ‰€                                                                                                                                                                                                                                                                                                                                                                                                                                             |       |                                  |
| -- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----- | -------------------------------- |
| 1  | **åŸ‹ã‚è¾¼ã¿ API ã®ç½®æ›**   | `scripts/embed_existing_articles.ts` å†…ã® OpenAI å‘¼ã³å‡ºã—éƒ¨åˆ†ã‚’ä¸‹è¨˜ã«å·®ã—æ›¿ãˆ:  `ts\n// æ—§: const res = await openai.embeddings.create({model:'text-embedding-3-small', input: text});\n// æ–°\nconst res = await fetch('http://localhost:11434/api/embeddings', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({ model: 'mxbai-embed-large', prompt: text })\n});\nconst { embedding } = await res.json(); // 1536 æ¬¡å…ƒé…åˆ—\n` |       |                                  |
| 2  | **ãƒ­ãƒ¼ã‚«ãƒ«ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆåã‚’è¿½åŠ ** | `package.json` â†’ `scripts` ã«è¡Œã‚’è¿½åŠ   `json\n\"embed:local\": \"tsx scripts/embed_existing_articles.ts\"\n`                                                                                                                                                                                                                                                                                                                                                    |       |                                  |
| 3  | **ã‚³ãƒŸãƒƒãƒˆ**           | `bash\ngit add scripts/embed_existing_articles.ts package.json\ngit commit -m \"switch embed script to Ollama local\"\n`                                                                                                                                                                                                                                                                                                                                   |       |                                  |
| 4  | **ãƒ­ãƒ¼ã‚«ãƒ«åŸ‹ã‚è¾¼ã¿å®Ÿè¡Œ**     | Shell ã‚¿ãƒ–ã§  `bash\nnpm run embed:local\n`<br>**æœŸå¾…çµæœ**: `ğŸš€ Starting embedding process` â†’ 3 è¨˜äº‹åˆ†ã® `âœ… Stored embedding:` ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹                                                                                                                                                                                                                                                                                                                              |       |                                  |
| 5  | **å‹•ä½œç¢ºèª API**       | \`\`\`bash\ncurl -s -X POST [http://localhost:5000/api/llm-context](http://localhost:5000/api/llm-context) \\\n  -H "Content-Type: application/json" \\\n  -d '{"keyword":"SEO"}'                                                                                                                                                                                                                                                                          | jq '. | length'\n\`\`\`<br>0 ã§ãªã‘ã‚Œã°åŸ‹ã‚è¾¼ã¿æˆåŠŸ |
| 6  | **ãƒ“ãƒ«ãƒ‰ & ãƒ‡ãƒ—ãƒ­ã‚¤**     | `bash\nnpm run build && git push     # push ã§ Replit ãŒå†ãƒ‡ãƒ—ãƒ­ã‚¤å€™è£œã«\n`<br>Deployments ç”»é¢ã§ **Redeploy** ã‚’ã‚¯ãƒªãƒƒã‚¯                                                                                                                                                                                                                                                                                                                                                    |       |                                  |
| 7  | **ãƒ•ãƒ­ãƒ¼å…¨ä½“ãƒ†ã‚¹ãƒˆ**       | ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ â†’ `Sign in with GitHub` â†’ Scrape â†’ Persona â€¦ Finalize ãŒ LLM ç”Ÿæˆã¾ã§å‹•ãã‹ç¢ºèª                                                                                                                                                                                                                                                                                                                                                                          |       |                                  |

> **å‚™è€ƒ**
>
> * Ollama å´ã§ `mxbai-embed-large` ãŒãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã‹ `ollama list` ã§ã”ç¢ºèªãã ã•ã„ã€‚
> * åŸ‹ã‚è¾¼ã¿é•·ãŒ 1536 D ãªã®ã§ DB ã‚¹ã‚­ãƒ¼ãƒã¯æ—¢ã« `vector(1536)` ã«æ›´æ–°æ¸ˆã¿ã®ã¯ãšã€‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‚‰å†ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

## Replit ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸é€ã‚‹ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ï¼ˆå¿…è¦ãªã‚‰ï¼‰

```
/* === Switch embed script to Ollama ===
1. scripts/embed_existing_articles.ts ã® OpenAI å‘¼ã³å‡ºã—ã‚’
   fetch('http://localhost:11434/api/embeddings', â€¦ model:'mxbai-embed-large') ã«ç½®æ›ã€‚
2. package.json scripts ã« "embed:local": "tsx scripts/embed_existing_articles.ts" ã‚’è¿½åŠ ã€‚
3. git add + commitã€‚
=== */
```

ï¼ˆæ‰‹ä½œæ¥­ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´ã›ã‚‹ãªã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘¼ã³å‡ºã—ã¯ä¸è¦ã§ã™ï¼‰

---

### ä»¥ä¸Šã‚’å®Ÿè¡Œå¾Œã€`npm run embed:local` ãŒæˆåŠŸã™ã‚Œã° **ãƒ­ãƒ¼ã‚«ãƒ« LLama ã¸ã®å®Œå…¨ç§»è¡Œ** ãŒå®Œäº†ã—ã¾ã™ã€‚
